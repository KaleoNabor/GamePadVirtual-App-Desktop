# ğŸ® GamePadVirtual - Controle para Jogos no PC com Streaming

Transforme seu smartphone Android em um controle profissional para PC com streaming de Ã¡udio e vÃ­deo de baixa latÃªncia. Com ele a falta de controles para jogar com seus amigos ou atÃ© mesmo sozinho nÃ£o serÃ¡ mais um problema, podendo conectar atÃ© 8 controles (8 celulares).

---

## ğŸ“±+ğŸ–¥ï¸ COMO UTILIZAR:

- Usar como um controle:
   1. Baixe e Instale o App e o Programa de Windows DisponÃ­veis abaixo
   2. Abra o App no celular e no computador, e conecte-os no mesmo Roteador (Wi-fi + Cabo ou Wi-fi + Wi-fi)
   3. Com o programa no PC aberto, vÃ¡ no App e clique em "Conectar na Rede" e selecione o Dispositivo que aparecer
   4. Depois no App clique em "Ir para o Controle" e aproveite

- FunÃ§Ã£o de Gamepad Externo:
   1. Conecte o gamepad externo USB ao celular
   2. Abra o App, e as funÃ§Ãµes dos botÃµes virtuais jÃ¡ serÃ£o substituÃ­das pelo gamepad externo
   3. Ã‰ possÃ­vel definir os gatilhos para Digitais na barra lateral de configuraÃ§Ãµes na tela de controle quando o Externo estiver conectado.

- FunÃ§Ã£o de Stream da tela do PC:
   1. No PC a opÃ§Ã£o de ComeÃ§ar Stream precisa estar marcada
   2. No app, assim que ele conectar na rede, na tela de controle a opÃ§Ã£o de Assistir Stream jÃ¡ aparecerÃ¡ no canto superior direito
   3. VocÃª pode alterar o modo de visualizaÃ§Ã£o para Imersivo (Tela cheia), Split (Tela reduzida para caber os botÃµes fora da ExibiÃ§Ã£o)

---

## ğŸ“¦ Downloads

### ğŸ“± Aplicativo Android
VersÃ£o: Mais atual  
Plataforma: Android 8.0+  
Arquivo: GamePadVirtual-Android-v-.-.-.apk  
ğŸ“¥ Baixar APK: https://github.com/KaleoNabor/GamePadVirtual-App-Desktop/releases/tag/v1.3.2-APP

### ğŸ–¥ï¸ Servidor PC
VersÃ£o: Mais atual  
Plataforma: Windows 10/11 (64-bit)  
Arquivo: GamePadVirtual-Server-v-.-.-.zip  
ğŸ“¥ Baixar Servidor: https://github.com/KaleoNabor/GamePadVirtual-App-Desktop/releases/tag/v1.3.2-Server

---

## ğŸš€ Funcionalidades Principais - COMPLETO

### ğŸ¯ Controle Universal Multi-Plataforma
- EmulaÃ§Ã£o Xbox 360 & DualShock 4 via ViGEmBus
- Reconhecimento nativo pelo Windows e jogos
- Suporte a controles fÃ­sicos via Bluetooth/OTG
- Multitouch com atÃ© 8 toques simultÃ¢neos
- Controles do PC: Touchpad (mouse) e teclado virtual

### ğŸ–¥ï¸ Streaming de VÃ­deo & Ãudio (Alta Performance)
- Captura direta da tela via DirectX 11 (Zero-Copy)
- CodificaÃ§Ã£o hardware acelerada: NVIDIA NVENC, AMD AMF
- Codecs suportados: H.265, H.264, VP8
- Sistema de fallback inteligente: Automaticamente seleciona codec compatÃ­vel se H.265 falhar
- Controle de Keyframes: Otimizado para auto-recuperaÃ§Ã£o rÃ¡pida apÃ³s instabilidade
- Ãudio do sistema de alta fidelidade via WASAPI com roteamento dedicado
- BaixÃ­ssima latÃªncia com buffers otimizados para sincronia Ã¡udio/vÃ­deo perfeita (30-60 FPS)
- Roteamento de Ã¡udio inteligente no Android: Detecta fones (com fio/Bluetooth) e alterna automaticamente.

### ğŸ“¡ ConexÃ£o HÃ­brida & Estabilidade
- Wi-Fi automÃ¡tico com descoberta de rede
- Ancoragem USB para mÃ¡xima estabilidade
- TCP/UDP otimizado para dados e vÃ­deo
- ReconeÃ§Ã£o automÃ¡tica se a conexÃ£o cair
- Sistema de "ConexÃ£o Imortal":
    - ServiÃ§o de primeiro plano Android com notificaÃ§Ã£o persistente
    - Sistema de Heartbeat (Ping-Pong) mantÃ©m conexÃ£o ativa mesmo em segundo plano
    - O Ã¡udio continua tocando mesmo com tela bloqueada (como receptor sem fio)

### ğŸ® Motion Controls para Emuladores
- Servidor DSU nativo (porta 26760)
- Compatibilidade total com Cemu, Yuzu, Ryujinx, Dolphin (Somente por controle de PS4)
- GiroscÃ³pio e acelerÃ´metro de alta precisÃ£o
- Mira por movimento em jogos compatÃ­veis

### ğŸ› ï¸ Ferramentas AvanÃ§adas
- Editor de layout arrastar-e-soltar
- Touchpad para controle do mouse
- Teclado virtual completo
- VibraÃ§Ã£o hÃ¡ptica local e remota

### ğŸ–¥ï¸ ğŸ‰ SISTEMA DE MONITOR VIRTUAL (NOVO!)
- ğŸ–¥ï¸ ResoluÃ§Ã£o DinÃ¢mica e Exata (Modo Um Jogador)
  - LÃª a resoluÃ§Ã£o nativa do celular (ex: 1604x720 ou 2400x1080) durante o Handshake
  - Cria um monitor virtual sob medida para o dispositivo
  - Resultado: ImersÃ£o total no celular, sem bordas pretas laterais ou esticamento de imagem

- ğŸ® Modo Galera (1080p Fixo)
  - Cria um monitor com resoluÃ§Ã£o de 1920x1080 fixa para disponibilizar para todos os jogadores
  - Ideal para mÃºltiplos celulares ou espelhamento em TV
  - Garante o padrÃ£o 16:9 universal

- âš™ï¸ AutomaÃ§Ã£o de Arquivos (XML)
  - Edita e reescreve automaticamente o arquivo vdd_settings.xml na pasta do driver
  - NÃ£o Ã© mais necessÃ¡rio editar o arquivo de configuraÃ§Ãµes do drive manualmente

- ğŸ”„ ReinÃ­cio Robusto via PowerShell
  - Comandos nativos do Windows (Get-PnpDevice / Disable / Enable) via PowerShell
  - Driver reinicia corretamente (tela pisca) para aplicar novas configuraÃ§Ãµes

- ğŸ”¨ ForÃ§a Bruta de ResoluÃ§Ã£o (API Windows)
  - ImplementaÃ§Ã£o da funÃ§Ã£o ChangeDisplaySettingsExW
  - ForÃ§a o Windows a aceitar a resoluÃ§Ã£o customizada do XML imediatamente

- ğŸ§  Cache Inteligente (Anti-Loop)
  - Sistema lembra a Ãºltima configuraÃ§Ã£o aplicada
  - ReconexÃ£o instantÃ¢nea sem piscar a tela desnecessariamente
  - Driver nÃ£o reinicia se pedir a mesma resoluÃ§Ã£o

- ğŸ›¡ï¸ VerificaÃ§Ã£o de PermissÃµes
  - DetecÃ§Ã£o automÃ¡tica se o programa Ã© Administrador

### âš™ï¸ MENU DE CONFIGURAÃ‡Ã•ES DE STREAMING NO PC (NOVO):
- DetecÃ§Ã£o automÃ¡tica de Hardware e display de opÃ§Ãµes disponÃ­veis
- SeleÃ§Ã£o manual de Codec: H.265, H.264, VP8
- Controle de Taxa de quadros: 30, 45, 60, 90, 120 FPS
- Ajuste de Bitrate (Qualidade da imagem)
- ConfiguraÃ§Ãµes avanÃ§adas com opÃ§Ãµes recomendadas aplicadas automaticamente
- Arquitetura multitarefa robusta: ServiÃ§os de rede e processamento rodam em threads independentes para evitar travamentos.

---

## âš™ï¸ InstalaÃ§Ã£o RÃ¡pida

### ğŸ”µ PrÃ©-requisito ObrigatÃ³rio (PC)
Visual C++ Redistributable 2015-2022  
ğŸ“¥ Download Direto Microsoft: https://aka.ms/vs/17/release/vc_redist.x64.exe

### ğŸ“‹ Passo a Passo
1. ğŸ”µ Instale o VC++ Redist no PC (como Administrador)
2. ğŸ“¥ Baixe o servidor e extraia o ZIP
3. âœ… Instale os drivers necessÃ¡rios:
   - Driver ViGEmBus: O instalador estÃ¡ na pasta \drivers\ViGEmBus_Setup_X.X.X.exe
   - Virtual Display Driver: Abra o arquivo VDD Control.exe em \drivers\VDD.Control.25.7.23\ e clique na opÃ§Ã£o Install Driver. Quando terminar pode fechar.
4. ğŸ–¥ï¸ Execute GamePadVirtual-Desktop.exe
5. ğŸ“± Instale o app no celular
6. ğŸ” Conecte via "Descoberta AutomÃ¡tica"
7. ğŸ® Pronto para jogar!

---

## ğŸ¯ Casos de Uso

### ğŸ•¹ï¸ Jogos PC Nativo
- Steam, Epic Games, Xbox Game Pass
- Controles Xbox/PlayStation nativos
- Motion controls em jogos suportados

### ğŸ® Emuladores
- Cemu (Wii U): Motion controls perfeitos
- Yuzu/Ryujinx (Switch): Gyro aiming
- Dolphin (Wii): Controles de movimento
- PS2/PS3: Suporte via emulaÃ§Ã£o

### ğŸ’» Controle do PC
- Touchpad para mouse
- Teclado virtual para digitaÃ§Ã£o
- Atalhos rÃ¡pidos (Win, Alt+Tab, Esc)

---

## ğŸ”§ Arquitetura TÃ©cnica

| Recurso | Tecnologia | Status |
|---------|------------|---------|
| Controle | ViGEmBus (Kernel) | âœ… Pronto |
| VÃ­deo | GStreamer + NVENC/AMF + WebRTC (AceleraÃ§Ã£o por Hardware) | âœ… Pronto |
| Ãudio | WASAPI Loopback + Roteamento UDP Dedicado + Reprodutor Nativo Kotlin | âœ… Pronto |
| Rede | TCP/UDP + Broadcast Discovery + Heartbeat | âœ… Pronto |
| Sensores | Protocolo Cemuhook UDP | âœ… Pronto |
| Segundo Plano Android | ServiÃ§o de Primeiro Plano com NotificaÃ§Ã£o Persistente | âœ… Pronto |
| Monitor Virtual | Windows Display Driver API + PowerShell Automation | âœ… Pronto |
| Bluetooth | RFCOMM / BLE GATT | ğŸš§ Em Desenvolvimento |

---

## âš¡ Performance

- âš¡ LatÃªncia de controle: <8ms (125Hz)
- ğŸ¬ Streaming: AtÃ© 60 FPS com baixo delay e sincronia Ã¡udio/vÃ­deo aprimorada
- ğŸ”Š Ãudio: Qualidade Hi-Fi, estÃ©reo real, sem compressÃ£o degradante (modo "aplicativo de mÃºsica")
- ğŸ“Š Sensores: 100Hz sampling rate
- ğŸ¯ PrecisÃ£o analÃ³gica: 16-bit resolution
- ğŸ–¥ï¸ Monitor Virtual: AplicaÃ§Ã£o instantÃ¢nea de resoluÃ§Ãµes customizadas

---

## ğŸ› ï¸ ConfiguraÃ§Ã£o Recomendada

### ğŸ’» PC
- Windows 10/11 64-bit
- GPU com encoder hardware (NVENC/AMF) recomendada para melhor performance
- 4GB RAM mÃ­nimo
- ConexÃ£o Wi-Fi 5GHz ou USB Tethering para melhor estabilidade
- PermissÃµes de Administrador necessÃ¡rias para configurar o Monitor Virtual

### ğŸ“± Android
- Android 8.0+
- GiroscÃ³pio (recomendado para motion controls)
- Wi-Fi 5GHz ou USB Tethering
- 2GB RAM mÃ­nimo

---

## â“ Suporte e SoluÃ§Ã£o de Problemas

### ğŸ” ConexÃ£o NÃ£o Estabelecida
1. Verifique se estÃ£o na mesma rede Wi-Fi
2. Confirme que o firewall permite o aplicativo
3. Tente usar ancoragem USB via cabo

### ğŸ® Controles NÃ£o Funcionam
1. Verifique a instalaÃ§Ã£o do ViGEmBus (instalador na pasta \drivers\)
2. Confirme se o VC++ Redist estÃ¡ instalado
3. Teste com modo Xbox 360 primeiro

### ğŸ“¹ Streaming com Lag ou Problemas
1. Use Wi-Fi 5GHz ou cabo USB
2. No menu de configuraÃ§Ãµes do PC, reduza a taxa de quadros ou bitrate se necessÃ¡rio
3. Verifique se a aceleraÃ§Ã£o por hardware (NVENC/AMF) estÃ¡ funcionando nas configuraÃ§Ãµes
4. Ajuste o modo de visualizaÃ§Ã£o no app para "Split" se a conexÃ£o for mais lenta

### ğŸ–¥ï¸ Problemas com Monitor Virtual
1. PermissÃµes de Administrador: Execute o programa como Administrador (BotÃ£o direito â†’ Executar como administrador)
2. Driver nÃ£o instalado: Instale o Virtual Display Driver conforme instruÃ§Ãµes na seÃ§Ã£o de instalaÃ§Ã£o
3. Tela nÃ£o aparece: Aguarde 3-5 segundos apÃ³s conexÃ£o para o Windows detectar o novo monitor
4. ResoluÃ§Ã£o errada: Use o Modo Galera (1080p fixo) como fallback

### ğŸ¯ Motion Controls em Emuladores
1. No programa do PC, verifique se o Servidor DSU estÃ¡ ativo
2. Configure o emulador para conectar em 127.0.0.1:26760
   - No Cemu: Input â†’ Motion â†’ DSU Client
   - No Yuzu: ConfiguraÃ§Ãµes â†’ Controles â†’ Motion

### ğŸ”Š Problemas de Ãudio
1. Som "metÃ¡lico" ou cortado: Isso foi resolvido. Certifique-se de usar a versÃ£o mais recente do App e Servidor.
2. Sem Ã¡udio no fone Bluetooth: Verifique se o fone estÃ¡ conectado ao celular antes de iniciar o streaming. O sistema detecta automaticamente na conexÃ£o.
3. Ãudio cortando em 30 FPS: Corrigido com buffer otimizado. Se persistir, tente 60 FPS nas configuraÃ§Ãµes do PC.

---

## ğŸš§ Funcionalidades Experimentais

### ğŸ“¶ Bluetooth (Em Desenvolvimento)
- ConexÃ£o direta PCâ†”Celular via Bluetooth
- Menor consumo de bateria
- Largura de banda reduzida vs Wi-Fi

Nota: O Bluetooth estÃ¡ em fase de testes e pode nÃ£o oferecer a mesma estabilidade que Wi-Fi/USB.

---

## ğŸ“„ LICENÃ‡A E TERMOS DE USO

### ğŸ”’ SOFTWARE PROPRIETÃRIO
- CÃ³digo fonte fechado - nÃ£o disponÃ­vel publicamente
- DistribuiÃ§Ã£o apenas do executÃ¡vel para uso final
- ModificaÃ§Ãµes proibidas - nÃ£o Ã© permitida engenharia reversa

### ğŸ“ TERMOS DE USO
- Uso gratuito para fins pessoais
- Proibida redistribuiÃ§Ã£o sem autorizaÃ§Ã£o
- NÃ£o-comercial - uso pessoal apenas

### âš ï¸ COMPONENTES DE TERCEIROS
Este software utiliza componentes de cÃ³digo aberto:
- ViGEmBus - LicenÃ§a MIT (https://github.com/ViGEm/ViGEmBus)
- GStreamer - LicenÃ§a LGPL (https://gstreamer.freedesktop.org)

### ğŸ” DIREITOS AUTORAIS
O cÃ³digo original e implementaÃ§Ãµes especÃ­ficas sÃ£o propriedade do desenvolvedor.

---

Transforme sua experiÃªncia de jogo com controle preciso, streaming de vÃ­deo de alta performance e Ã¡udio de qualidade profissional! ğŸ¬ğŸ®ğŸ”Š

Precisa de ajuda? Consulte a seÃ§Ã£o de soluÃ§Ã£o de problemas acima ou abra uma issue no nosso GitHub!
